# Shopee AI Translator Chrome Extension

Shopeeのチャット画面で外国語メッセージを日本語に翻訳し、日本語で話した内容を相手の言語に翻訳した状態で入力欄へ差し込むChrome拡張です。

## 主な機能

- **受信メッセージの自動翻訳**: 受信したメッセージに翻訳済みテキストを追加表示します。
- **音声入力 + 翻訳送信**: 入力欄にマイクボタンを追加し、日本語で話した内容を指定した言語に翻訳して入力欄へ挿入します。
- **カスタマイズ可能なプロンプト**: AI翻訳用プロンプトや対象言語をオプションページから調整できます。
  - プロンプト内では `{{targetLanguage}}` や `{{sourceLanguage}}` プレースホルダーが利用できます。
- **セレクタ調整**: ShopeeのDOM構造変更に備えて、主要要素のセレクタをオプションから編集可能です。

## セットアップ手順

1. `chrome://extensions` を開き、右上の「デベロッパーモード」を有効にします。
2. 「パッケージ化されていない拡張機能を読み込む」を押し、本フォルダ (`chrome-extension/shopee-ai-translator`) を選択します。
3. 追加された「Shopee AI Translator」の「詳細」→「拡張機能のオプション」を開き、以下を設定します。
   - 使用するAI翻訳APIのベースURL（例: `https://api.openai.com`）
   - モデル名（例: `gpt-4o-mini`）
   - APIキー
   - 受信側の翻訳言語（初期値: `ja`）
   - 送信側の翻訳言語（例: 相手が英語であれば `en`）
   - 音声認識ロケール（例: 日本語認識なら `ja-JP`）
4. Shopeeのチャット画面を開くと拡張機能が読み込まれ、受信メッセージに翻訳が追記され、入力欄にマイクボタンが表示されます。

## 使い方

- **受信メッセージ**: 各メッセージ下部に翻訳済みの日本語が自動で追加されます。
- **送信メッセージ**: マイクボタンをクリックし、日本語で話すと認識されたあと相手言語に翻訳されたテキストが入力欄に挿入されます。そのまま送信ボタンを押してください。
- **エラー表示**: 翻訳APIエラーや音声認識に失敗した場合、マイクボタン付近にエラー内容が表示されます。

## APIについて

- OpenAI APIなど、Chat Completions互換のエンドポイントを想定しています。
- APIキーはブラウザに保存されるため、利用は自己責任で行ってください。
- 利用料金やレート制限に注意してください。

## 注意事項

- Shopee側のUI変更により、要素が取得できない場合はオプションページのセレクタ設定を更新してください。
- Chromeの音声認識 (`SpeechRecognition`) を利用しています。ブラウザのアクセス許可ダイアログが表示された場合は「許可」を選択してください。
- 自動翻訳結果は完全ではありません。重要なやり取りは原文も確認してください。
